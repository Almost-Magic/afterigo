import{j as a}from"./index-BcUfrbxf.js";import{r as R,u as Ge}from"./vendor-C8arOna2.js";import{B as q}from"./Button-CQpydY-3.js";import{u as Ne}from"./authStore-4aszkSg7.js";import{i as ke,j as Me,k as Ce,L as Pe,T as Se,l as Te,n as Ae,b as K,P as Ee,H as Ie,h as Fe,A as Re,m as Oe,o as Be,f as Le}from"./ui-BKdhH4BT.js";import"./storage-2jmnBxhj.js";function J(t){const c=[],n=[];let l=0;t.length>=12?l+=25:t.length>=8?(l+=15,n.push("Use at least 12 characters for better security")):n.push("Use at least 8 characters"),/[A-Z]/.test(t)?l+=15:n.push("Add uppercase letters"),/[a-z]/.test(t)?l+=15:n.push("Add lowercase letters"),/[0-9]/.test(t)?l+=15:n.push("Add numbers"),/[^A-Za-z0-9]/.test(t)?l+=15:n.push("Add special characters"),t.length>=16&&(l+=15,c.push("Excellent length"));let j;return l>=85?(j="strong",c.push("Strong password")):l>=60?(j="good",c.push("Good password")):l>=40?(j="fair",c.push("Fair password")):(j="weak",c.push("Weak password")),{level:j,score:l,feedback:c,suggestions:n}}const We=({formData:t,setFormData:c,onNext:n})=>{const[l,j]=R.useState(!1),[b,y]=R.useState(J(""));R.useEffect(()=>{y(J(t.password))},[t.password]);const T=()=>{switch(b.level){case"strong":return"bg-green-500";case"good":return"bg-sage";case"fair":return"bg-amber-500";default:return"bg-red-500"}};return a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-warmGray-900 dark:text-warmGray-100 mb-2",children:"Create Your Master Password"}),a.jsx("p",{className:"text-warmGray-600 dark:text-warmGray-400 mb-6",children:"This password protects everything. We cannot recover it if you forget it. That's a feature, not a limitation."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:"Master Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:l?"text":"password",value:t.password,onChange:k=>c({...t,password:k.target.value}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"Enter a strong password"}),a.jsx("button",{type:"button",onClick:()=>j(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-warmGray-400",children:l?a.jsx(ke,{className:"w-5 h-5"}):a.jsx(Me,{className:"w-5 h-5"})})]})]}),t.password&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-2 bg-warmGray-200 dark:bg-warmGray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-300 ${T()}`,style:{width:`${b.score}%`}})}),a.jsx("p",{className:"text-sm text-warmGray-500",children:b.feedback.join(" â€¢ ")}),b.suggestions.length>0&&a.jsxs("p",{className:"text-sm text-warmGray-400",children:["Suggestions: ",b.suggestions.join(", ")]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:"Confirm Password"}),a.jsx("input",{type:l?"text":"password",value:t.confirmPassword,onChange:k=>c({...t,confirmPassword:k.target.value}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"Confirm your password"})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[a.jsx(Ce,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300",children:[a.jsx("p",{className:"font-medium mb-1",children:"We cannot recover this password"}),a.jsx("p",{children:"If you forget it, your data cannot be recovered. Write it down somewhere safe."})]})]})]})]})},Ue=[{value:"critical",label:"Critical Access"},{value:"financial",label:"Financial"},{value:"social",label:"Social Media"},{value:"cloud",label:"Cloud Storage"}],ze=({formData:t,setFormData:c})=>{const[n,l]=R.useState({serviceName:"",username:"",email:"",password:"",category:"critical"}),j=()=>{n.serviceName&&n.username&&n.password&&(c({...t,accounts:[...t.accounts,{...n}]}),l({serviceName:"",username:"",email:"",password:"",category:"critical"}))},b=y=>{c({...t,accounts:t.accounts.filter((T,k)=>k!==y)})};return a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-warmGray-900 dark:text-warmGray-100 mb-2",children:"Start with your critical accounts"}),a.jsx("p",{className:"text-warmGray-600 dark:text-warmGray-400 mb-6",children:"Add 3-5 critical accounts to get started. You can add more later."}),t.accounts.length>0&&a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsxs("h3",{className:"text-sm font-medium text-warmGray-700 dark:text-warmGray-300",children:["Accounts added (",t.accounts.length,")"]}),t.accounts.map((y,T)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-warmGray-50 dark:bg-warmGray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pe,{className:"w-4 h-4 text-sage"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-warmGray-900 dark:text-warmGray-100",children:y.serviceName}),a.jsx("p",{className:"text-sm text-warmGray-500",children:y.username})]})]}),a.jsx("button",{onClick:()=>b(T),className:"p-2 text-warmGray-400 hover:text-red-500 transition-colors",children:a.jsx(Se,{className:"w-4 h-4"})})]},T))]}),a.jsxs("div",{className:"space-y-4 p-4 border border-warmGray-200 dark:border-warmGray-600 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-warmGray-900 dark:text-warmGray-100",children:"Add an account"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-warmGray-600 dark:text-warmGray-400 mb-1",children:"Service Name"}),a.jsx("input",{type:"text",value:n.serviceName,onChange:y=>l({...n,serviceName:y.target.value}),className:"w-full px-3 py-2 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"e.g., Gmail"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-warmGray-600 dark:text-warmGray-400 mb-1",children:"Category"}),a.jsx("select",{value:n.category,onChange:y=>l({...n,category:y.target.value}),className:"w-full px-3 py-2 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",children:Ue.map(y=>a.jsx("option",{value:y.value,children:y.label},y.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-warmGray-600 dark:text-warmGray-400 mb-1",children:"Username / Email"}),a.jsx("input",{type:"text",value:n.username,onChange:y=>l({...n,username:y.target.value}),className:"w-full px-3 py-2 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"your@email.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-warmGray-600 dark:text-warmGray-400 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:n.password,onChange:y=>l({...n,password:y.target.value}),className:"w-full px-3 py-2 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),a.jsxs("button",{onClick:j,disabled:!n.serviceName||!n.username||!n.password,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-sage text-white rounded-lg hover:bg-sage-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Te,{className:"w-4 h-4"}),"Add Account"]})]})]})},Ze=["Spouse","Partner","Child","Parent","Sibling","Friend","Executor","Lawyer","Other"],_e=({formData:t,setFormData:c})=>a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-warmGray-900 dark:text-warmGray-100 mb-2",children:"Who should have access when you can't?"}),a.jsx("p",{className:"text-warmGray-600 dark:text-warmGray-400 mb-6",children:"Add a trusted person who can access your vault when the time comes."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:[a.jsx(Ae,{className:"inline w-4 h-4 mr-1"}),"Name"]}),a.jsx("input",{type:"text",value:t.trustedPerson.name,onChange:n=>c({...t,trustedPerson:{...t.trustedPerson,name:n.target.value}}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"Their full name"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:[a.jsx(K,{className:"inline w-4 h-4 mr-1"}),"Email"]}),a.jsx("input",{type:"email",value:t.trustedPerson.email,onChange:n=>c({...t,trustedPerson:{...t.trustedPerson,email:n.target.value}}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"their@email.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:[a.jsx(Ee,{className:"inline w-4 h-4 mr-1"}),"Phone (optional)"]}),a.jsx("input",{type:"tel",value:t.trustedPerson.phone,onChange:n=>c({...t,trustedPerson:{...t.trustedPerson,phone:n.target.value}}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"+61 400 000 000"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:[a.jsx(Ie,{className:"inline w-4 h-4 mr-1"}),"Relationship"]}),a.jsxs("select",{value:t.trustedPerson.relationship,onChange:n=>c({...t,trustedPerson:{...t.trustedPerson,relationship:n.target.value}}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",children:[a.jsx("option",{value:"",children:"Select a relationship"}),Ze.map(n=>a.jsx("option",{value:n,children:n},n))]})]})]})]}),He=({formData:t,setFormData:c})=>{const n=t.message.content.split(/\s+/).filter(l=>l.length>0).length;return a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-warmGray-900 dark:text-warmGray-100 mb-2",children:"Write one message to someone you love"}),a.jsx("p",{className:"text-warmGray-600 dark:text-warmGray-400 mb-6",children:"Even just a few sentences. They will receive this when the time comes."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:"To"}),a.jsxs("select",{value:t.message.recipient,onChange:l=>c({...t,message:{...t.message,recipient:l.target.value}}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",children:[a.jsx("option",{value:"",children:"Select a recipient"}),t.trustedPerson.name&&a.jsxs("option",{value:t.trustedPerson.name,children:[t.trustedPerson.name," (",t.trustedPerson.relationship,")"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:"Subject"}),a.jsx("input",{type:"text",value:t.message.title,onChange:l=>c({...t,message:{...t.message,title:l.target.value}}),className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none",placeholder:"e.g., Something I wanted to tell you"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-warmGray-700 dark:text-warmGray-300 mb-1",children:[a.jsx(K,{className:"inline w-4 h-4 mr-1"}),"Message"]}),a.jsx("textarea",{value:t.message.content,onChange:l=>c({...t,message:{...t.message,content:l.target.value}}),rows:8,className:"w-full px-4 py-3 rounded-lg border border-warmGray-200 dark:border-warmGray-600 bg-white dark:bg-warmGray-800 text-warmGray-900 dark:text-warmGray-100 focus:ring-2 focus:ring-sage focus:outline-none resize-none",placeholder:"Write whatever feels right. There's no wrong way to do this..."}),a.jsxs("p",{className:"text-sm text-warmGray-500 mt-1 text-right",children:[n," words"]})]}),a.jsx("div",{className:"bg-warmGray-50 dark:bg-warmGray-700 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-warmGray-600 dark:text-warmGray-300",children:["ðŸ’¡ ",a.jsx("strong",{children:"Tip:"})," You can add more messages later, including voice recordings and photos."]})})]})]})};var z={};(function t(c,n,l,j){var b=!!(c.Worker&&c.Blob&&c.Promise&&c.OffscreenCanvas&&c.OffscreenCanvasRenderingContext2D&&c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype.transferControlToOffscreen&&c.URL&&c.URL.createObjectURL),y=typeof Path2D=="function"&&typeof DOMMatrix=="function",T=function(){if(!c.OffscreenCanvas)return!1;try{var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var s=r.transferToImageBitmap();e.createPattern(s,"no-repeat")}catch{return!1}return!0}();function k(){}function O(r){var e=n.exports.Promise,s=e!==void 0?e:c.Promise;return typeof s=="function"?new s(r):(r(k,k),null)}var B=function(r,e){return{transform:function(s){if(r)return s;if(e.has(s))return e.get(s);var i=new OffscreenCanvas(s.width,s.height),d=i.getContext("2d");return d.drawImage(s,0,0),e.set(s,i),i},clear:function(){e.clear()}}}(T,new Map),P=function(){var r=Math.floor(16.666666666666668),e,s,i={},d=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(m){var u=Math.random();return i[u]=requestAnimationFrame(function o(h){d===h||d+r-1<h?(d=h,delete i[u],m()):i[u]=requestAnimationFrame(o)}),u},s=function(m){i[m]&&cancelAnimationFrame(i[m])}):(e=function(m){return setTimeout(m,r)},s=function(m){return clearTimeout(m)}),{frame:e,cancel:s}}(),A=function(){var r,e,s={};function i(d){function m(u,o){d.postMessage({options:u||{},callback:o})}d.init=function(o){var h=o.transferControlToOffscreen();d.postMessage({canvas:h},[h])},d.fire=function(o,h,x){if(e)return m(o,null),e;var p=Math.random().toString(36).slice(2);return e=O(function(w){function f(G){G.data.callback===p&&(delete s[p],d.removeEventListener("message",f),e=null,B.clear(),x(),w())}d.addEventListener("message",f),m(o,p),s[p]=f.bind(null,{data:{callback:p}})}),e},d.reset=function(){d.postMessage({reset:!0});for(var o in s)s[o](),delete s[o]}}return function(){if(r)return r;if(!l&&b){var d=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([d])))}catch(m){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",m),null}i(r)}return r}}(),Q={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function X(r,e){return e?e(r):r}function D(r){return r!=null}function v(r,e,s){return X(r&&D(r[e])?r[e]:Q[e],s)}function ee(r){return r<0?0:Math.floor(r)}function re(r,e){return Math.floor(Math.random()*(e-r))+r}function L(r){return parseInt(r,16)}function ae(r){return r.map(te)}function te(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:L(e.substring(0,2)),g:L(e.substring(2,4)),b:L(e.substring(4,6))}}function se(r){var e=v(r,"origin",Object);return e.x=v(e,"x",Number),e.y=v(e,"y",Number),e}function ne(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function le(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function oe(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function ie(r,e,s,i,d,m,u,o,h){r.save(),r.translate(e,s),r.rotate(m),r.scale(i,d),r.arc(0,0,1,u,o,h),r.restore()}function ce(r){var e=r.angle*(Math.PI/180),s=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*s-Math.random()*s),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function de(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var s=e.tick++/e.totalTicks,i=e.x+e.random*e.tiltCos,d=e.y+e.random*e.tiltSin,m=e.wobbleX+e.random*e.tiltCos,u=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-s)+")",r.beginPath(),y&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(ue(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(m-i)*.1,Math.abs(u-d)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var o=Math.PI/10*e.wobble,h=Math.abs(m-i)*.1,x=Math.abs(u-d)*.1,p=e.shape.bitmap.width*e.scalar,w=e.shape.bitmap.height*e.scalar,f=new DOMMatrix([Math.cos(o)*h,Math.sin(o)*h,-Math.sin(o)*x,Math.cos(o)*x,e.x,e.y]);f.multiplySelf(new DOMMatrix(e.shape.matrix));var G=r.createPattern(B.transform(e.shape.bitmap),"no-repeat");G.setTransform(f),r.globalAlpha=1-s,r.fillStyle=G,r.fillRect(e.x-p/2,e.y-w/2,p,w),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(m-i)*e.ovalScalar,Math.abs(u-d)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):ie(r,e.x,e.y,Math.abs(m-i)*e.ovalScalar,Math.abs(u-d)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var g=Math.PI/2*3,N=4*e.scalar,M=8*e.scalar,C=e.x,E=e.y,I=5,S=Math.PI/I;I--;)C=e.x+Math.cos(g)*M,E=e.y+Math.sin(g)*M,r.lineTo(C,E),g+=S,C=e.x+Math.cos(g)*N,E=e.y+Math.sin(g)*N,r.lineTo(C,E),g+=S;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(d)),r.lineTo(Math.floor(m),Math.floor(u)),r.lineTo(Math.floor(i),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function me(r,e,s,i,d){var m=e.slice(),u=r.getContext("2d"),o,h,x=O(function(p){function w(){o=h=null,u.clearRect(0,0,i.width,i.height),B.clear(),d(),p()}function f(){l&&!(i.width===j.width&&i.height===j.height)&&(i.width=r.width=j.width,i.height=r.height=j.height),!i.width&&!i.height&&(s(r),i.width=r.width,i.height=r.height),u.clearRect(0,0,i.width,i.height),m=m.filter(function(G){return de(u,G)}),m.length?o=P.frame(f):w()}o=P.frame(f),h=w});return{addFettis:function(p){return m=m.concat(p),x},canvas:r,promise:x,reset:function(){o&&P.cancel(o),h&&h()}}}function Z(r,e){var s=!r,i=!!v(e||{},"resize"),d=!1,m=v(e,"disableForReducedMotion",Boolean),u=b&&!!v(e||{},"useWorker"),o=u?A():null,h=s?ne:le,x=r&&o?!!r.__confetti_initialized:!1,p=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,w;function f(g,N,M){for(var C=v(g,"particleCount",ee),E=v(g,"angle",Number),I=v(g,"spread",Number),S=v(g,"startVelocity",Number),xe=v(g,"decay",Number),we=v(g,"gravity",Number),ye=v(g,"drift",Number),H=v(g,"colors",ae),pe=v(g,"ticks",Number),V=v(g,"shapes"),fe=v(g,"scalar"),be=!!v(g,"flat"),Y=se(g),$=C,U=[],ve=r.width*Y.x,je=r.height*Y.y;$--;)U.push(ce({x:ve,y:je,angle:E,spread:I,startVelocity:S,color:H[$%H.length],shape:V[re(0,V.length)],ticks:pe,decay:xe,gravity:we,drift:ye,scalar:fe,flat:be}));return w?w.addFettis(U):(w=me(r,U,h,N,M),w.promise)}function G(g){var N=m||v(g,"disableForReducedMotion",Boolean),M=v(g,"zIndex",Number);if(N&&p)return O(function(S){S()});s&&w?r=w.canvas:s&&!r&&(r=oe(M),document.body.appendChild(r)),i&&!x&&h(r);var C={width:r.width,height:r.height};o&&!x&&o.init(r),x=!0,o&&(r.__confetti_initialized=!0);function E(){if(o){var S={getBoundingClientRect:function(){if(!s)return r.getBoundingClientRect()}};h(S),o.postMessage({resize:{width:S.width,height:S.height}});return}C.width=C.height=null}function I(){w=null,i&&(d=!1,c.removeEventListener("resize",E)),s&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,x=!1)}return i&&!d&&(d=!0,c.addEventListener("resize",E,!1)),o?o.fire(g,C,I):f(g,C,I)}return G.reset=function(){o&&o.reset(),w&&w.reset()},G}var W;function _(){return W||(W=Z(null,{useWorker:!0,resize:!0})),W}function ue(r,e,s,i,d,m,u){var o=new Path2D(r),h=new Path2D;h.addPath(o,new DOMMatrix(e));var x=new Path2D;return x.addPath(h,new DOMMatrix([Math.cos(u)*d,Math.sin(u)*d,-Math.sin(u)*m,Math.cos(u)*m,s,i])),x}function he(r){if(!y)throw new Error("path confetti are not supported in this browser");var e,s;typeof r=="string"?e=r:(e=r.path,s=r.matrix);var i=new Path2D(e),d=document.createElement("canvas"),m=d.getContext("2d");if(!s){for(var u=1e3,o=u,h=u,x=0,p=0,w,f,G=0;G<u;G+=2)for(var g=0;g<u;g+=2)m.isPointInPath(i,G,g,"nonzero")&&(o=Math.min(o,G),h=Math.min(h,g),x=Math.max(x,G),p=Math.max(p,g));w=x-o,f=p-h;var N=10,M=Math.min(N/w,N/f);s=[M,0,0,M,-Math.round(w/2+o)*M,-Math.round(f/2+h)*M]}return{type:"path",path:e,matrix:s}}function ge(r){var e,s=1,i="#000000",d='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,s="scalar"in r?r.scalar:s,d="fontFamily"in r?r.fontFamily:d,i="color"in r?r.color:i);var m=10*s,u=""+m+"px "+d,o=new OffscreenCanvas(m,m),h=o.getContext("2d");h.font=u;var x=h.measureText(e),p=Math.ceil(x.actualBoundingBoxRight+x.actualBoundingBoxLeft),w=Math.ceil(x.actualBoundingBoxAscent+x.actualBoundingBoxDescent),f=2,G=x.actualBoundingBoxLeft+f,g=x.actualBoundingBoxAscent+f;p+=f+f,w+=f+f,o=new OffscreenCanvas(p,w),h=o.getContext("2d"),h.font=u,h.fillStyle=i,h.fillText(e,G,g);var N=1/s;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[N,0,0,N,-p*N/2,-w*N/2]}}n.exports=function(){return _().apply(this,arguments)},n.exports.reset=function(){_().reset()},n.exports.create=Z,n.exports.shapeFromPath=he,n.exports.shapeFromText=ge})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),z,!1);const Ve=z.exports;z.exports.create;const Ye=({onNext:t})=>{const c=()=>{Ve({particleCount:100,spread:70,origin:{y:.6},colors:["#7C9885","#A3C4AD","#5F7161","#D6D3D1"]}),t()};return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-sage/10 flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:"ðŸŽ‰"})}),a.jsx("h2",{className:"text-2xl font-semibold text-warmGray-900 dark:text-warmGray-100 mb-2",children:"You've done something beautiful"}),a.jsx("p",{className:"text-warmGray-600 dark:text-warmGray-400 mb-6",children:"You've just done more than 95% of people. Your family is a little safer now."}),a.jsxs("div",{className:"bg-warmGray-50 dark:bg-warmGray-700 rounded-lg p-6 mb-6 text-left",children:[a.jsx("h3",{className:"font-medium text-warmGray-900 dark:text-warmGray-100 mb-3",children:"What you've set up:"}),a.jsxs("ul",{className:"space-y-2 text-warmGray-600 dark:text-warmGray-300",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sage",children:"âœ“"})," Master password protection"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sage",children:"âœ“"})," Critical accounts secured"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sage",children:"âœ“"})," Trusted person designated"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sage",children:"âœ“"})," First message written"]})]})]}),a.jsx("p",{className:"text-warmGray-500 dark:text-warmGray-400 mb-6",children:"Come back anytime to add more accounts, write more messages, and complete your legacy."}),a.jsx("button",{onClick:c,className:"px-8 py-3 bg-sage text-white rounded-lg hover:bg-sage-dark transition-colors font-medium",children:"Go to Dashboard"})]})},F=[{component:We,title:"Password"},{component:ze,title:"Critical Accounts"},{component:_e,title:"Trusted Person"},{component:He,title:"First Message"},{component:Ye,title:"Complete"}],De=()=>{const t=Ge(),{createAccount:c,isAuthenticated:n}=Ne(),[l,j]=R.useState(0),[b,y]=R.useState({password:"",confirmPassword:"",accounts:[],trustedPerson:{name:"",email:"",phone:"",relationship:""},message:{title:"",content:"",recipient:""}});R.useEffect(()=>{n&&t("/dashboard")},[n,t]);const T=()=>{switch(l){case 0:return b.password.length>=12&&b.password===b.confirmPassword;case 1:return b.accounts.length>=1;case 2:return b.trustedPerson.name&&b.trustedPerson.email;case 3:return b.message.title&&b.message.content;default:return!0}},k=async()=>{if(l===F.length-1)try{await c(b.password),t("/dashboard")}catch(P){console.error("Failed to create account:",P)}else j(P=>P+1)},O=()=>{l>0&&j(P=>P-1)},B=F[l].component;return a.jsx("div",{className:"min-h-screen bg-warmGray-50 dark:bg-warmGray-900 flex items-center justify-center p-6",children:a.jsxs("div",{className:"w-full max-w-2xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:F.map((P,A)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`
                    w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium
                    ${A<l?"bg-sage text-white":A===l?"bg-sage text-white ring-4 ring-sage/20":"bg-warmGray-200 dark:bg-warmGray-700 text-warmGray-500"}
                  `,children:A<l?a.jsx(Fe,{className:"w-4 h-4"}):A+1}),A<F.length-1&&a.jsx("div",{className:`w-full h-1 mx-2 rounded ${A<l?"bg-sage":"bg-warmGray-200 dark:bg-warmGray-700"}`})]},A))}),a.jsxs("p",{className:"text-center text-sm text-warmGray-500 mt-4",children:["Step ",l+1," of ",F.length,": ",F[l].title]})]}),a.jsx(Re,{mode:"wait",children:a.jsx(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-warmGray-800 rounded-2xl shadow-xl p-8",children:a.jsx(B,{formData:b,setFormData:y,onNext:k,onBack:O})},l)}),a.jsxs("div",{className:"flex justify-between mt-6",children:[a.jsxs(q,{variant:"ghost",onClick:O,disabled:l===0,className:l===0?"invisible":"",children:[a.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsx(q,{onClick:k,disabled:!T(),children:l===F.length-1?a.jsx(a.Fragment,{children:"Complete Setup"}):a.jsxs(a.Fragment,{children:["Next",a.jsx(Le,{className:"w-4 h-4 ml-2"})]})})]})]})})};export{De as default};
