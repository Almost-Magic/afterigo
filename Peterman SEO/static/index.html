<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peterman V4.1 ‚Äî AI-Era SEO & Brand Authority</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-brand">
                <span class="logo-icon">P</span>
                <div>
                    <span class="brand-name">Peterman</span>
                    <span class="brand-tagline">The Authority & Presence Engine</span>
                </div>
            </div>
            <div class="header-status" id="systemStatus">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Checking...</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Domain Input Section -->
            <section class="section domain-section" id="domainSection">
                <div class="domain-input-container">
                    <h1>Enter a Domain to Audit</h1>
                    <p class="subtitle">Peterman will automatically run a full SEO audit, check AI visibility, and optimise for LLM ranking.</p>
                    
                    <form id="domainForm" class="domain-form">
                        <div class="input-wrapper">
                            <input type="text" id="domainInput" placeholder="example.com" autocomplete="off" required>
                            <button type="submit" class="btn btn-gold btn-large" id="auditBtn">
                                <span class="btn-text">Run Full Audit</span>
                                <span class="btn-loader" style="display:none;">
                                    <span class="spinner"></span>
                                    <span id="auditProgress">Starting...</span>
                                </span>
                            </button>
                        </div>
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoOptimize" checked>
                            <span>Automatically apply fixes & generate content</span>
                        </label>
                    </form>
                </div>
            </section>

            <!-- Loading Animation -->
            <section class="section loading-section" id="loadingSection" style="display:none;">
                <div class="loading-container">
                    <div class="loading-spinner large"></div>
                    <h2 id="loadingTitle">Analysing Domain...</h2>
                    <p id="loadingSubtitle">Please wait while Peterman runs comprehensive checks</p>
                    
                    <div class="progress-steps" id="progressSteps">
                        <div class="step" data-step="crawl">
                            <div class="step-icon">üîç</div>
                            <div class="step-content">
                                <div class="step-name">Crawling Website</div>
                                <div class="step-status">Extracting meta tags, content, and structure</div>
                            </div>
                        </div>
                        <div class="step" data-step="perception">
                            <div class="step-icon">üß†</div>
                            <div class="step-content">
                                <div class="step-name">Perception Scan</div>
                                <div class="step-status">Testing how AI models see your brand</div>
                            </div>
                        </div>
                        <div class="step" data-step="meta">
                            <div class="step-icon">üìã</div>
                            <div class="step-content">
                                <div class="step-name">Meta Tags</div>
                                <div class="step-status">Analysing and generating optimised tags</div>
                            </div>
                        </div>
                        <div class="step" data-step="schema">
                            <div class="step-icon">üè∑Ô∏è</div>
                            <div class="step-content">
                                <div class="step-name">Structured Data</div>
                                <div class="step-status">Checking schema markup and rich results</div>
                            </div>
                        </div>
                        <div class="step" data-step="sitemap">
                            <div class="step-icon">üó∫Ô∏è</div>
                            <div class="step-content">
                                <div class="step-name">Sitemap</div>
                                <div class="step-status">Validating XML sitemap and robots.txt</div>
                            </div>
                        </div>
                        <div class="step" data-step="ai">
                            <div class="step-icon">ü§ñ</div>
                            <div class="step-content">
                                <div class="step-name">AI Referenceability</div>
                                <div class="step-status">Checking visibility for Claude, ChatGPT, Gemini</div>
                            </div>
                        </div>
                        <div class="step" data-step="llm">
                            <div class="step-icon">üìä</div>
                            <div class="step-content">
                                <div class="step-name">LLM Ranking</div>
                                <div class="step-status">Optimising for AI-generated answers</div>
                            </div>
                        </div>
                        <div class="step" data-step="content">
                            <div class="step-icon">‚úçÔ∏è</div>
                            <div class="step-content">
                                <div class="step-name">Content Generation</div>
                                <div class="step-status">Creating blog posts and optimisations</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Dashboard -->
            <section class="section results-section" id="resultsSection" style="display:none;">
                <div class="results-container">
                    <!-- Domain Header -->
                    <div class="results-header">
                        <div class="domain-display">
                            <span class="domain-url" id="resultDomain">example.com</span>
                            <span class="audit-date" id="auditDate"></span>
                        </div>
                        <div class="overall-score" id="overallScore">
                            <div class="score-circle">
                                <svg viewBox="0 0 100 100">
                                    <circle class="score-bg" cx="50" cy="50" r="45"/>
                                    <circle class="score-progress" cx="50" cy="50" r="45" id="scoreCircle"/>
                                </svg>
                                <div class="score-value">
                                    <span id="scoreNumber">0</span>
                                    <span class="score-label">Overall</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Score Cards Grid -->
                    <div class="score-cards" id="scoreCards">
                        <!-- Cards injected by JS -->
                    </div>

                    <!-- Detailed Sections -->
                    <div class="results-tabs" id="resultsTabs">
                        <button class="tab active" data-tab="overview">Overview</button>
                        <button class="tab" data-tab="meta">Meta Tags</button>
                        <button class="tab" data-tab="schema">Schema</button>
                        <button class="tab" data-tab="sitemap">Sitemap</button>
                        <button class="tab" data-tab="ai">AI Visibility</button>
                        <button class="tab" data-tab="llm">LLM Ranking</button>
                        <button class="tab" data-tab="content">Content</button>
                    </div>

                    <!-- Tab Content -->
                    <div class="tab-content" id="tabContent">
                        <!-- Overview Tab -->
                        <div class="tab-panel active" data-panel="overview">
                            <div class="overview-grid">
                                <div class="overview-card">
                                    <h3>üè∑Ô∏è Meta Tags</h3>
                                    <div class="mini-score" id="metaScore">--</div>
                                    <p id="metaSummary">Awaiting analysis...</p>
                                </div>
                                <div class="overview-card">
                                    <h3>üìã Structured Data</h3>
                                    <div class="mini-score" id="schemaScore">--</div>
                                    <p id="schemaSummary">Awaiting analysis...</p>
                                </div>
                                <div class="overview-card">
                                    <h3>üó∫Ô∏è Sitemap</h3>
                                    <div class="mini-score" id="sitemapScore">--</div>
                                    <p id="sitemapSummary">Awaiting analysis...</p>
                                </div>
                                <div class="overview-card">
                                    <h3>ü§ñ AI Referenceability</h3>
                                    <div class="mini-score" id="aiScore">--</div>
                                    <p id="aiSummary">Awaiting analysis...</p>
                                </div>
                            </div>
                            
                            <div class="issues-section">
                                <h3>üö® Critical Issues</h3>
                                <div class="issues-list" id="criticalIssues">
                                    <p class="empty-state">No critical issues detected</p>
                                </div>
                            </div>
                            
                            <div class="recommendations-section">
                                <h3>üí° Recommendations</h3>
                                <div class="recommendations-list" id="recommendations">
                                    <p class="empty-state">Run an audit to see recommendations</p>
                                </div>
                            </div>
                        </div>

                        <!-- Meta Tags Tab -->
                        <div class="tab-panel" data-panel="meta">
                            <h3>Meta Tags Analysis</h3>
                            <div class="meta-comparison" id="metaComparison">
                                <div class="meta-column">
                                    <h4>Current</h4>
                                    <div class="meta-item">
                                        <label>Title</label>
                                        <div class="meta-value" id="currentTitle">--</div>
                                    </div>
                                    <div class="meta-item">
                                        <label>Description</label>
                                        <div class="meta-value" id="currentDesc">--</div>
                                    </div>
                                    <div class="meta-item">
                                        <label>OG Title</label>
                                        <div class="meta-value" id="currentOgTitle">--</div>
                                    </div>
                                    <div class="meta-item">
                                        <label>OG Description</label>
                                        <div class="meta-value" id="currentOgDesc">--</div>
                                    </div>
                                </div>
                                <div class="meta-column optimised">
                                    <h4>Optimised</h4>
                                    <div class="meta-item">
                                        <label>Title</label>
                                        <div class="meta-value" id="optTitle">--</div>
                                        <button class="btn btn-small btn-gold" onclick="applyMeta('title')">Apply</button>
                                    </div>
                                    <div class="meta-item">
                                        <label>Description</label>
                                        <div class="meta-value" id="optDesc">--</div>
                                        <button class="btn btn-small btn-gold" onclick="applyMeta('description')">Apply</button>
                                    </div>
                                    <div class="meta-item">
                                        <label>OG Title</label>
                                        <div class="meta-value" id="optOgTitle">--</div>
                                        <button class="btn btn-small btn-gold" onclick="applyMeta('og_title')">Apply</button>
                                    </div>
                                    <div class="meta-item">
                                        <label>OG Description</label>
                                        <div class="meta-value" id="optOgDesc">--</div>
                                        <button class="btn btn-small btn-gold" onclick="applyMeta('og_description')">Apply</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Schema Tab -->
                        <div class="tab-panel" data-panel="schema">
                            <h3>Structured Data / Schema Markup</h3>
                            <div class="schema-status" id="schemaStatus">
                                <div class="schema-item">
                                    <span class="schema-icon" id="schemaIcon">‚ùå</span>
                                    <span class="schema-name">Organization Schema</span>
                                    <span class="schema-status" id="orgStatus">Missing</span>
                                </div>
                                <div class="schema-item">
                                    <span class="schema-icon" id="webmasterIcon">‚ùå</span>
                                    <span class="schema-name">WebSite Schema</span>
                                    <span class="schema-status" id="webmasterStatus">Missing</span>
                                </div>
                                <div class="schema-item">
                                    <span class="schema-icon" id="schemaIcon">‚ùå</span>
                                    <span class="schema-name">Article Schema</span>
                                    <span class="schema-status" id="articleStatus">Missing</span>
                                </div>
                                <div class="schema-item">
                                    <span class="schema-icon" id="schemaIcon">‚ùå</span>
                                    <span class="schema-name">FAQ Schema</span>
                                    <span class="schema-status" id="faqStatus">Missing</span>
                                </div>
                            </div>
                            <div class="schema-code" id="schemaCode" style="display:none;">
                                <h4>Generated Schema</h4>
                                <pre><code id="schemaJson"></code></pre>
                                <button class="btn btn-gold" onclick="downloadSchema()">Download JSON-LD</button>
                            </div>
                        </div>

                        <!-- Sitemap Tab -->
                        <div class="tab-panel" data-panel="sitemap">
                            <h3>Sitemap Status</h3>
                            <div class="sitemap-grid" id="sitemapGrid">
                                <div class="sitemap-item">
                                    <label>XML Sitemap</label>
                                    <span class="sitemap-status" id="sitemapStatus">Not Found</span>
                                </div>
                                <div class="sitemap-item">
                                    <label>Robots.txt</label>
                                    <span class="sitemap-status" id="robotsStatus">Not Found</span>
                                </div>
                                <div class="sitemap-item">
                                    <label>Pages Discovered</label>
                                    <span class="sitemap-value" id="pagesDiscovered">0</span>
                                </div>
                                <div class="sitemap-item">
                                    <label>Last Modified</label>
                                    <span class="sitemap-value" id="lastModified">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- AI Visibility Tab -->
                        <div class="tab-panel" data-panel="ai">
                            <h3>AI Referenceability Score</h3>
                            <p class="tab-description">How well is this brand remembered and cited by AI models?</p>
                            
                            <div class="ai-scores" id="aiScores">
                                <div class="ai-model-card">
                                    <div class="model-name">Claude</div>
                                    <div class="model-score" id="claudeScore">--</div>
                                    <div class="model-bar"><div class="bar-fill" id="claudeBar"></div></div>
                                </div>
                                <div class="ai-model-card">
                                    <div class="model-name">ChatGPT</div>
                                    <div class="model-score" id="chatgptScore">--</div>
                                    <div class="model-bar"><div class="bar-fill" id="chatgptBar"></div></div>
                                </div>
                                <div class="ai-model-card">
                                    <div class="model-name">Gemini</div>
                                    <div class="model-score" id="geminiScore">--</div>
                                    <div class="model-bar"><div class="bar-fill" id="geminiBar"></div></div>
                                </div>
                                <div class="ai-model-card">
                                    <div class="model-name">Perplexity</div>
                                    <div class="model-score" id="perplexityScore">--</div>
                                    <div class="model-bar"><div class="bar-fill" id="perplexityBar"></div></div>
                                </div>
                            </div>

                            <div class="ai-tips" id="aiTips">
                                <h4>How to Improve AI Visibility</h4>
                                <ul id="aiTipsList">
                                    <li>Run a perception scan to see how AI models describe your brand</li>
                                </ul>
                            </div>
                        </div>

                        <!-- LLM Ranking Tab -->
                        <div class="tab-panel" data-panel="llm">
                            <h3>LLM Ranking Optimisation</h3>
                            <p class="tab-description">Appear in AI-generated answers when users search relevant keywords.</p>
                            
                            <div class="llm-rankings" id="llmRankings">
                                <div class="ranking-item">
                                    <div class="ranking-keyword" id="keyword1">Enter a domain to see keywords</div>
                                    <div class="ranking-score">
                                        <span class="ranking-position" id="pos1">--</span>
                                        <div class="ranking-bar"><div class="bar-fill" id="bar1"></div></div>
                                    </div>
                                </div>
                            </div>

                            <div class="optimization-tips" id="optTips">
                                <h4>Optimisation Suggestions</h4>
                                <ul id="optTipsList">
                                    <li>Your content will be analysed for LLM-friendly formatting</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Content Tab -->
                        <div class="tab-panel" data-panel="content">
                            <h3>Content Generation</h3>
                            <p class="tab-description">AI-generated content to improve SEO and AI visibility.</p>
                            
                            <div class="content-actions">
                                <button class="btn btn-gold" onclick="generateBlogPost()" id="genBlogBtn">
                                    ‚úçÔ∏è Generate Blog Post
                                </button>
                                <button class="btn btn-outline" onclick="generateFAQ()" id="genFaqBtn">
                                    ‚ùì Generate FAQ
                                </button>
                                <button class="btn btn-outline" onclick="optimizeContent()" id="optContentBtn">
                                    ‚ö° Optimise Existing
                                </button>
                            </div>

                            <div class="generated-content" id="generatedContent" style="display:none;">
                                <h4>Generated Content</h4>
                                <div class="content-preview" id="contentPreview"></div>
                                <div class="content-actions">
                                    <button class="btn btn-gold" onclick="copyContent()">Copy to Clipboard</button>
                                    <button class="btn btn-outline" onclick="downloadContent()">Download</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="results-actions">
                        <button class="btn btn-outline" onclick="runNewAudit()">üîÑ New Audit</button>
                        <button class="btn btn-gold" onclick="downloadReport()">üìÑ Download Report</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Toast Container -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
